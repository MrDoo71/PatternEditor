!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).KldPathParser={})}(this,function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function a(t,e,a){return e&&o(t.prototype,e),a&&o(t,a),t}var r=function(){function t(o,a){e(this,t),this.type=o,this.text=a}return a(t,[{key:"typeis",value:function(t){return this.type===t}}]),t}();r.UNDEFINED=0,r.COMMAND=1,r.NUMBER=2,r.EOD=3;var l=function(){function t(o){e(this,t),null==o&&(o=""),this.setPathData(o)}return a(t,[{key:"setPathData",value:function(t){if("string"!=typeof t)throw new TypeError("The first parameter must be a string");this._pathData=t}},{key:"getNextToken",value:function(){for(var t=null,e=this._pathData;null===t;)if(null===e||""===e)t=new r(r.EOD,"");else if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([AaCcHhLlMmQqSsTtVvZz])/))t=new r(r.COMMAND,RegExp.$1),e=e.substr(RegExp.$1.length);else{if(!e.match(/^(([-+]?\d+(\.\d*)?|[-+]?\.\d+)([eE][-+]?\d+)?)/))throw new SyntaxError("Unrecognized path data: ".concat(e));t=new r(r.NUMBER,RegExp.$1),e=e.substr(RegExp.$1.length)}return this._pathData=e,t}}]),t}(),n=function(){function t(){e(this,t),this._lexer=new l,this._handler=null}return a(t,[{key:"parseData",value:function(e){if("string"!=typeof e)throw new TypeError("The first parameter must be a string: ".concat(e));null!==this._handler&&"function"==typeof this._handler.beginParse&&this._handler.beginParse();var o=this._lexer;o.setPathData(e);for(var a="BOP",l=null,n=o.getNextToken();!1===n.typeis(r.EOD);){var c=void 0,i=[];switch(n.type){case r.COMMAND:if("BOP"===a&&"M"!==n.text&&"m"!==n.text)throw new SyntaxError("New paths must begin with a moveto command. Found '".concat(n.text,"'"));a=n.text,c=t.PARAMCOUNT[n.text.toUpperCase()],n=o.getNextToken();break;case r.NUMBER:if("BOP"===a)throw new SyntaxError("New paths must begin with a moveto command. Found '".concat(n.text,"'"));c=t.PARAMCOUNT[a.toUpperCase()];break;default:throw new SyntaxError("Unrecognized command type: ".concat(n.type))}for(var s=0;s<c;s++){switch(n.type){case r.COMMAND:throw new SyntaxError("Parameter must be a number. Found '".concat(n.text,"'"));case r.NUMBER:i[s]=parseFloat(n.text);break;case r.EOD:throw new SyntaxError("Unexpected end of string");default:throw new SyntaxError("Unrecognized parameter type. Found type '".concat(n.type,"'"))}n=o.getNextToken()}if(null!==this._handler){var u=this._handler,h=t.METHODNAME[a];"a"!==a&&"A"!==a||(i[3]=0!==i[3],i[4]=0!==i[4]),null!==u&&"function"==typeof u[h]&&u[h].apply(u,i)}switch(a){case"M":a="L";break;case"m":a="l";break;case"Z":case"z":a="BOP"}if(n===l)throw new SyntaxError("Parser stalled on '".concat(n.text,"'"));l=n}null!==this._handler&&"function"==typeof this._handler.endParse&&this._handler.endParse()}},{key:"setHandler",value:function(t){this._handler=t}}]),t}();n.PARAMCOUNT={A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0},n.METHODNAME={A:"arcAbs",a:"arcRel",C:"curvetoCubicAbs",c:"curvetoCubicRel",H:"linetoHorizontalAbs",h:"linetoHorizontalRel",L:"linetoAbs",l:"linetoRel",M:"movetoAbs",m:"movetoRel",Q:"curvetoQuadraticAbs",q:"curvetoQuadraticRel",S:"curvetoCubicSmoothAbs",s:"curvetoCubicSmoothRel",T:"curvetoQuadraticSmoothAbs",t:"curvetoQuadraticSmoothRel",V:"linetoVerticalAbs",v:"linetoVerticalRel",Z:"closePath",z:"closePath"};var c=function(){function t(){e(this,t),this.logs=[]}return a(t,[{key:"log",value:function(t){for(var e=arguments.length,o=new Array(e>1?e-1:0),a=1;a<e;a++)o[a-1]=arguments[a];this.logs.push("".concat(t,"(").concat(o.join(","),")"))}},{key:"arcAbs",value:function(t,e,o,a,r,l,n){this.log.apply(this,["arcAbs"].concat(Array.prototype.slice.call(arguments)))}},{key:"arcRel",value:function(t,e,o,a,r,l,n){this.log.apply(this,["arcRel"].concat(Array.prototype.slice.call(arguments)))}},{key:"curvetoCubicAbs",value:function(t,e,o,a,r,l){this.log.apply(this,["curvetoCubicAbs"].concat(Array.prototype.slice.call(arguments)))}},{key:"curvetoCubicRel",value:function(t,e,o,a,r,l){this.log.apply(this,["curvetoCubicRel"].concat(Array.prototype.slice.call(arguments)))}},{key:"linetoHorizontalAbs",value:function(t){this.log.apply(this,["linetoHorizontalAbs"].concat(Array.prototype.slice.call(arguments)))}},{key:"linetoHorizontalRel",value:function(t){this.log.apply(this,["linetoHorizontalRel"].concat(Array.prototype.slice.call(arguments)))}},{key:"linetoAbs",value:function(t,e){this.log.apply(this,["linetoAbs"].concat(Array.prototype.slice.call(arguments)))}},{key:"linetoRel",value:function(t,e){this.log.apply(this,["linetoRel"].concat(Array.prototype.slice.call(arguments)))}},{key:"movetoAbs",value:function(t,e){this.log.apply(this,["movetoAbs"].concat(Array.prototype.slice.call(arguments)))}},{key:"movetoRel",value:function(t,e){this.log.apply(this,["movetoRel"].concat(Array.prototype.slice.call(arguments)))}},{key:"curvetoQuadraticAbs",value:function(t,e,o,a){this.log.apply(this,["curvetoQuadraticAbs"].concat(Array.prototype.slice.call(arguments)))}},{key:"curvetoQuadraticRel",value:function(t,e,o,a){this.log.apply(this,["curvetoQuadraticRel"].concat(Array.prototype.slice.call(arguments)))}},{key:"curvetoCubicSmoothAbs",value:function(t,e,o,a){this.log.apply(this,["curvetoCubicSmoothAbs"].concat(Array.prototype.slice.call(arguments)))}},{key:"curvetoCubicSmoothRel",value:function(t,e,o,a){this.log.apply(this,["curvetoCubicSmoothRel"].concat(Array.prototype.slice.call(arguments)))}},{key:"curvetoQuadraticSmoothAbs",value:function(t,e){this.log.apply(this,["curvetoQuadraticSmoothAbs"].concat(Array.prototype.slice.call(arguments)))}},{key:"curvetoQuadraticSmoothRel",value:function(t,e){this.log.apply(this,["curvetoQuadraticSmoothRel"].concat(Array.prototype.slice.call(arguments)))}},{key:"linetoVerticalAbs",value:function(t){this.log.apply(this,["linetoVerticalAbs"].concat(Array.prototype.slice.call(arguments)))}},{key:"linetoVerticalRel",value:function(t){this.log.apply(this,["linetoVerticalRel"].concat(Array.prototype.slice.call(arguments)))}},{key:"closePath",value:function(){this.log.apply(this,["closePath"].concat(Array.prototype.slice.call(arguments)))}}]),t}();t.PathLexer=l,t.PathParser=n,t.SampleHandler=c,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index-umd.min.js.map
